(()=>{"use strict";var e,n={341:()=>{const e=window.wp.blocks,n=window.React,s=window.wp.i18n,o=window.wp.blockEditor,t=window.wp.components,i=window.wp.primitives,l=window.ReactJSXRuntime,c=(0,l.jsx)(i.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,l.jsx)(i.Path,{d:"M16.7 7.1l-6.3 8.5-3.3-2.5-.9 1.2 4.5 3.4L17.9 8z"})}),a=(0,l.jsx)(i.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,l.jsx)(i.Path,{d:"m19 7-3-3-8.5 8.5-1 4 4-1L19 7Zm-7 11.5H5V20h7v-1.5Z"})}),r=(0,l.jsx)(i.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,l.jsx)(i.Path,{fillRule:"evenodd",clipRule:"evenodd",d:"M12 5.5A2.25 2.25 0 0 0 9.878 7h4.244A2.251 2.251 0 0 0 12 5.5ZM12 4a3.751 3.751 0 0 0-3.675 3H5v1.5h1.27l.818 8.997a2.75 2.75 0 0 0 2.739 2.501h4.347a2.75 2.75 0 0 0 2.738-2.5L17.73 8.5H19V7h-3.325A3.751 3.751 0 0 0 12 4Zm4.224 4.5H7.776l.806 8.861a1.25 1.25 0 0 0 1.245 1.137h4.347a1.25 1.25 0 0 0 1.245-1.137l.805-8.861Z"})});function d({attributes:e,setAttributes:n,setOpen:i}){return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(o.InspectorControls,{children:(0,l.jsxs)(t.PanelBody,{title:(0,s.__)("Settings"),children:[(0,l.jsx)(o.PanelColorSettings,{title:(0,s.__)("Colors"),initialOpen:!0,colorSettings:[{label:(0,s.__)("Icon Color","lwn-icons"),value:e?.iconColor,onChange:e=>n({iconColor:e}),enableAlpha:!0}]}),(0,l.jsx)(t.RangeControl,{label:(0,s.__)("Icon Size","lwn-icons"),value:e.iconSize,onChange:e=>n({iconSize:e}),min:5,max:300})]})}),e.selectedIcon&&(0,l.jsx)(o.BlockControls,{children:(0,l.jsxs)(t.Toolbar,{label:"Options",children:[(0,l.jsx)(t.ToolbarButton,{icon:r,label:(0,s.__)("Delete Icon","lwn-icons"),onClick:()=>n({selectedIcon:""})}),(0,l.jsx)(t.ToolbarButton,{icon:a,label:(0,s.__)("Replace Icon","lwn-icons"),onClick:()=>i(!0)})]})})]})}function h(e){const{icons:n,message:s,loading:o,refetch:i,clearCache:c}=e;return(0,l.jsxs)("div",{children:[(0,l.jsx)(t.Button,{variant:"primary",onClick:i,disabled:o,style:{marginBottom:"16px"},children:o?"Fetching Icons...":"Fetch & Cache Material Icons"}),(0,l.jsx)(t.Button,{variant:"secondary",onClick:c,style:{marginLeft:"8px"},children:"Clear Cache"}),s&&(0,l.jsxs)("p",{style:{marginTop:"16px"},children:[s,n.length>0&&(0,l.jsxs)("span",{children:[" (",n.length," categories cached)"]})]})]})}const w=window.wp.element,m="material-icons-data",u="material-icons-cache-time",p=JSON.parse('{"UU":"learn-with-naw/lwn-icons"}');(0,e.registerBlockType)(p.UU,{edit:function({attributes:e,setAttributes:i}){const a=(0,o.useBlockProps)(),{icons:r,message:p,loading:g,refetch:x,clearCache:j}=function({forceRefresh:e=!1}={}){const[n,s]=(0,w.useState)([]),[o,t]=(0,w.useState)(""),[i,l]=(0,w.useState)(!1),c=async()=>{l(!0),t("Fetching icons...");try{const n=localStorage.getItem(m),o=localStorage.getItem(u);if(!e&&n&&o&&Date.now()-parseInt(o,10)<864e5)return s(JSON.parse(n)),t("Using cached icons"),void l(!1);const i=await fetch("https://raw.githubusercontent.com/nawras92/google-material-icons-json/main/data/icons.json");if(!i.ok)throw new Error(`Failed to fetch icons: ${i.status}`);const c=await i.json();localStorage.setItem(m,JSON.stringify(c)),localStorage.setItem(u,Date.now().toString()),s(c),t(`Fetched ${c.length} categories`)}catch(e){t(`Error: ${e.message}`),console.error(e)}finally{l(!1)}};return(0,w.useEffect)(()=>{c()},[]),{icons:n,message:o,loading:i,refetch:c,clearCache:()=>{localStorage.removeItem(m),localStorage.removeItem(u),s([]),t("Cache cleared")}}}(),[v,f]=(0,n.useState)(!1),[b,_]=(0,n.useState)(""),[C,S]=(0,n.useState)([]);return(0,n.useEffect)(()=>{if(r&&Array.isArray(r))if(b.trim()){const e=r.map(e=>({...e,icons:e.icons.filter(e=>e?.name.toLowerCase().includes(b.toLowerCase()))})).filter(e=>e.icons.length>0);S(e)}else S(r)},[b,r]),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(d,{attributes:e,setAttributes:i,setOpen:f}),(0,l.jsxs)("div",{...a,children:[!e.selectedIcon&&(0,l.jsx)("div",{className:"wp-block-learn-with-naw-lwn-icons__user-control",children:(0,l.jsx)(t.Button,{icon:c,variant:"secondary",onClick:()=>f(!0),children:(0,s.__)("Select an Icon","lwn-icons")})}),v&&(0,l.jsxs)(t.Modal,{size:"large",className:"wp-block-learn-with-naw-lwn-icons__icons-modal",title:(0,s.__)("Please Select an Icon","lwn-icons"),onRequestClose:()=>f(!1),children:[(0,l.jsx)(h,{icons:r,message:p,loading:g,refetch:x,clearCache:j}),(0,l.jsxs)("div",{className:"wp-block-learn-with-naw-lwn-icons__icons-details",children:[(0,l.jsxs)("p",{className:"wp-block-learn-with-naw-lwn-icons__user-selection",children:[(0,l.jsx)("span",{children:(0,s.__)("You have selected: ","lwn-icons")}),(0,l.jsx)("i",{className:"material-icons material-symbols-outlined",children:e?.selectedIcon})]}),(0,l.jsx)(t.Button,{variant:"primary",onClick:()=>f(!1),children:(0,s.__)("Done")}),(0,l.jsxs)("div",{className:"wp-block-learn-with-naw-lwn-icons__search-icons",children:[(0,l.jsx)("label",{children:(0,s.__)("Search Icons","lwn-icons")}),(0,l.jsx)("input",{type:"text",value:b,onChange:e=>_(e.target.value)})]}),(0,l.jsx)("div",{className:"wp-block-learn-with-naw-lwn-icons__icons-list",children:C.map((n,s)=>(0,l.jsxs)("div",{className:"icon-category",children:[(0,l.jsx)("h3",{children:n.category?.toUpperCase()}),(0,l.jsx)("div",{className:"icon-grid",children:n.icons.map((n,s)=>(0,l.jsx)("i",{className:"material-icons material-symbols-outlined "+(e.selectedIcon===n?.name?"selected":""),onClick:()=>i({selectedIcon:n?.name}),children:n?.name},s))}),(0,l.jsx)("hr",{})]},s))})]})]}),e.selectedIcon&&(0,l.jsx)("i",{className:"material-icons material-symbols-outlined",style:{color:e.iconColor,fontSize:e.iconSize+"px"},children:e.selectedIcon})]})]})},save:function({attributes:e}){const n=o.useBlockProps.save();return(0,l.jsx)("div",{...n,children:e.selectedIcon&&(0,l.jsx)("i",{className:"material-icons material-symbols-outlined",style:{color:e.iconColor,fontSize:e.iconSize+"px"},children:e.selectedIcon})})}})}},s={};function o(e){var t=s[e];if(void 0!==t)return t.exports;var i=s[e]={exports:{}};return n[e](i,i.exports,o),i.exports}o.m=n,e=[],o.O=(n,s,t,i)=>{if(!s){var l=1/0;for(d=0;d<e.length;d++){for(var[s,t,i]=e[d],c=!0,a=0;a<s.length;a++)(!1&i||l>=i)&&Object.keys(o.O).every(e=>o.O[e](s[a]))?s.splice(a--,1):(c=!1,i<l&&(l=i));if(c){e.splice(d--,1);var r=t();void 0!==r&&(n=r)}}return n}i=i||0;for(var d=e.length;d>0&&e[d-1][2]>i;d--)e[d]=e[d-1];e[d]=[s,t,i]},o.o=(e,n)=>Object.prototype.hasOwnProperty.call(e,n),(()=>{var e={57:0,350:0};o.O.j=n=>0===e[n];var n=(n,s)=>{var t,i,[l,c,a]=s,r=0;if(l.some(n=>0!==e[n])){for(t in c)o.o(c,t)&&(o.m[t]=c[t]);if(a)var d=a(o)}for(n&&n(s);r<l.length;r++)i=l[r],o.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return o.O(d)},s=globalThis.webpackChunklwn_icons=globalThis.webpackChunklwn_icons||[];s.forEach(n.bind(null,0)),s.push=n.bind(null,s.push.bind(s))})();var t=o.O(void 0,[350],()=>o(341));t=o.O(t)})();